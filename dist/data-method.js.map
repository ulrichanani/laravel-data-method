{"version":3,"sources":["data-method.js"],"names":["$","modalTemplate","join","getCSRFToken","options","token","attr","dataMethod","url","cb","method","toUpperCase","includes","undefined","confirm","trim","length","success","title","message","theme","window","$modal","find","html","appendTo","modal","on","remove","swal","text","type","showCancelButton","confirmButtonText","closeOnConfirm","customClass","sendRequest","ajax","ajaxOptions","params","_token","data","sendAjax","form","fields","action","_method","name","input","value","push","createFields","append","createForm","submit","document","e","preventDefault","link","this"],"mappings":"AAAAA,EAAE,WACE,IAAIC,EAAgB,CAChB,kHACA,sDACA,8BACA,6BACA,+HACA,0DACA,SACA,iCACA,6BACA,gGACA,6EACA,SACA,SACA,SACA,UACFC,KAAK,IAEP,SAASC,EAAaC,GAClB,OAAOA,EAAQC,OAASL,EAAE,yBAAyBM,KAAK,WAU5D,SAASC,EAAWC,EAAKJ,EAASK,GAC9B,IAAIC,EAASN,EAAQM,QAAU,OAC/BA,EAASA,EAAOC,cAChBF,EAAKA,GAAM,aAIN,CAAC,OAAQ,MAAO,UAAUG,SAASF,UAKhBG,IAApBT,EAAQU,SAC8B,IAAlCV,EAAQU,QAAQC,OAAOC,SACvBZ,EAAQU,QAAU,iBAiE9B,SAAiBV,EAASa,GACtB,IAAIC,EAAQd,EAAQc,MAChBC,EAAUf,EAAQU,QAGtB,OAFYV,EAAQgB,OAAS,WAGzB,IAAK,UACDC,OAAOP,QAAQK,IAAYF,IAC3B,MACJ,IAAK,YACD,IAAIK,EAAStB,EAAEC,GACfqB,EAAOC,KAAK,gBAAgBC,KAAKN,GACjCI,EAAOC,KAAK,eAAeC,KAAKL,GAChCG,EAAOG,SAAS,QAChBH,EAAOI,MAAM,QAEbJ,EAAOC,KAAK,gBAAgBI,GAAG,QAAS,WACpCL,EAAOI,MAAM,QACbT,MAGJK,EAAOK,GAAG,kBAAmB,WACzBL,EAAOM,WAEX,MACJ,IAAK,aACDC,KAAK,CACGX,MAAOA,EACPY,KAAMX,EACNY,KAAM,UACNC,kBAAkB,EAClBC,kBAAmB,UACnBC,gBAAgB,EAChBC,YAAa,uBAEjB,WACIlB,OAnGZH,CAAQV,EAAS,WACbK,EAAG2B,EAAY5B,EAAKE,EAAQN,OAGhCK,EAAG2B,EAAY5B,EAAKE,EAAQN,KAIpC,SAASgC,EAAY5B,EAAKE,EAAQN,GAC9B,OAAIA,EAAQiC,KA0BhB,SAAkB7B,EAAKE,EAAQN,GAC3B,IAAIkC,EAAsC,iBAAjBlC,EAAQiC,KAAoBjC,EAAQiC,KAAO,GAOpE,OANAE,OAASnC,EAAQmC,QAAU,GAC3BA,OAAOC,OAASrC,EAAaC,GAE7BkC,EAAY9B,IAAMA,EAClB8B,EAAY5B,OAASA,EACrB4B,EAAYG,KAAOF,OACZvC,EAAEqC,KAAKC,GAjCHI,CAASlC,EAAKE,EAAQN,GAMrC,SAAoBI,EAAKE,EAAQN,GAC7B,IAAIuC,EAAMJ,EAAQK,EAclB,OAZAD,EAAO3C,EAAE,SAAU,CACfU,OAAU,OACVmC,OAAUrC,KAId+B,EAASnC,EAAQmC,QAAU,IACpBC,OAASrC,EAAaC,GAC7BmC,EAAOO,QAAUpC,EAEjBkC,EAiBJ,SAAsBL,GAClB,IAAIK,EAAS,GAEb,IAAK,IAAIG,KAAQR,EAAQ,CACrB,IAAIS,EACAhD,EAAE,UAAW,CACT+C,KAAQA,EACRhB,KAAQ,SACRkB,MAASV,EAAOQ,KAGxBH,EAAOM,KAAKF,GAGhB,OAAOJ,EA/BEO,CAAaZ,GAEfI,EAAKS,OAAOR,GACdnB,SAAS,QApBH4B,CAAW7C,EAAKE,EAAQN,GAASkD,SA6FhDtD,EAAEuD,UAAU5B,GAAG,QAAS,iBAhIxB,SAAsB6B,GAClBA,EAAEC,iBACF,IAAIC,EAAO1D,EAAE2D,MAEbpD,EAAWmD,EAAKpD,KAAK,QAASoD,EAAKjB,UA6HvCpB,OAAOd,WAAaA","file":"data-method.js","sourcesContent":["$(function() {\n    var modalTemplate = [\n        '<div class=\"modal fade laravel-data-method\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"dataMethodModalLabel\">',\n        '<div class=\"modal-dialog modal-sm\" role=\"document\">',\n        '<div class=\"modal-content\">',\n        '<div class=\"modal-header\">',\n        '<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>',\n        '<h4 class=\"modal-title\" id=\"dataMethodModalLabel\"></h4>',\n        '</div>',\n        '<div class=\"modal-body\"></div>',\n        '<div class=\"modal-footer\">',\n        '<button type=\"button\" class=\"btn btn-default btn-cancel\" data-dismiss=\"modal\">Cancel</button>',\n        '<button type=\"button\" class=\"btn btn-primary btn-confirm\">Confirm</button>',\n        '</div>',\n        '</div>',\n        '</div>',\n        '</div>'\n    ].join('');\n\n    function getCSRFToken(options) {\n        return options.token || $('meta[name=csrf-token]').attr('content');\n    }\n\n    function handleMethod(e) {\n        e.preventDefault();\n        var link = $(this);\n\n        dataMethod(link.attr('href'), link.data());\n    }\n\n    function dataMethod(url, options, cb) {\n        var method = options.method || 'POST';\n        method = method.toUpperCase();\n        cb = cb || function() {};\n\n        // If the data-method attribute is not PUT or DELETE,\n        // then we don't know what to do. Just ignore.\n        if (!['POST', 'PUT', 'DELETE'].includes(method)) {\n            return;\n        }\n\n        // Allow user to optionally provide data-confirm=\"Are you sure?\"\n        if (options.confirm !== undefined) {\n            if (options.confirm.trim().length === 0) {\n                options.confirm = 'Are you sure?'\n            }\n            confirm(options, function() {\n                cb(sendRequest(url, method, options));\n            });\n        } else {\n            cb(sendRequest(url, method, options));\n        }\n    }\n\n    function sendRequest(url, method, options) {\n        if (options.ajax) {\n            return sendAjax(url, method, options);\n        } else {\n            return createForm(url, method, options).submit();\n        }\n    }\n\n    function createForm(url, method, options) {\n        var form, params, fields, token;\n\n        form = $('<form>', {\n            'method': 'POST',\n            'action': url\n        });\n\n\n        params = options.params || {};\n        params._token = getCSRFToken(options);\n        params._method = method;\n\n        fields = createFields(params);\n\n        return form.append(fields)\n            .appendTo('body');\n    }\n\n    function sendAjax(url, method, options) {\n        var ajaxOptions = typeof options.ajax === 'object' ? options.ajax : {};\n        params = options.params || {};\n        params._token = getCSRFToken(options);\n\n        ajaxOptions.url = url;\n        ajaxOptions.method = method;\n        ajaxOptions.data = params\n        return $.ajax(ajaxOptions);\n    }\n\n    function createFields(params) {\n        var fields = [];\n\n        for (var name in params) {\n            var input =\n                $('<input>', {\n                    'name': name,\n                    'type': 'hidden',\n                    'value': params[name]\n                });\n\n            fields.push(input);\n        }\n\n        return fields;\n    }\n\n    function confirm(options, success) {\n        var title = options.title;\n        var message = options.confirm;\n        var theme = options.theme || 'default';\n\n        switch (theme) {\n            case 'default':\n                window.confirm(message) && success();\n                break;\n            case 'bootstrap':\n                var $modal = $(modalTemplate);\n                $modal.find('.modal-title').html(title);\n                $modal.find('.modal-body').html(message);\n                $modal.appendTo('body');\n                $modal.modal('show');\n\n                $modal.find('.btn-confirm').on('click', function() {\n                    $modal.modal('hide');\n                    success();\n                });\n\n                $modal.on('hidden.bs.modal', function() {\n                    $modal.remove();\n                });\n                break;\n            case 'sweetalert':\n                swal({\n                        title: title,\n                        text: message,\n                        type: \"warning\",\n                        showCancelButton: true,\n                        confirmButtonText: \"Confirm\",\n                        closeOnConfirm: false,\n                        customClass: 'laravel-data-method'\n                    },\n                    function() {\n                        success();\n                    });\n                break;\n        }\n    }\n\n    $(document).on('click', 'a[data-method]', handleMethod);\n    window.dataMethod = dataMethod;\n});\n"]}